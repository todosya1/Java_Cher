@startdot
digraph G {
    rankdir=TB;
    node [shape=box, fontname="Arial"];
    
    subgraph cluster_0 {
        label="Исходный стек";
        style=filled;
        color=lightgrey;
        node [style=filled,color=white];
        
        50 -> 40 -> 30 -> 20 -> 10 [dir=none];
        label="Начальное состояние\n50 наверху, 10 внизу";
    }
    
    subgraph cluster_1 {
        label="Шаг 1: Временный стек";
        style=filled;
        color=lightgrey;
        node [style=filled,color=white];
        
        10_t -> 20_t -> 30_t -> 40_t -> 50_t [dir=none];
        label="temp: перевернутый стек\n10 наверху";
    }
    
    subgraph cluster_2 {
        label="Шаг 2: Сохраняем lastEl";
        style=filled;
        color=lightpink;
        node [style=filled,color=white];
        
        last [label="lastEl = 10"];
        20_t2 -> 30_t2 -> 40_t2 -> 50_t2 [dir=none];
        label="temp: без первого элемента\nlastEl содержит 10";
    }
    
    subgraph cluster_3 {
        label="Результат";
        style=filled;
        color=lightgreen;
        node [style=filled,color=white];
        
        10_new -> 50_new -> 40_new -> 30_new -> 20_new [dir=none];
        label="Конечное состояние\n10 (бывший последний) наверху";
    }
}
@enddot
