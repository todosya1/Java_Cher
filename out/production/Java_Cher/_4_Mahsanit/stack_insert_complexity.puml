@startdot
digraph G {
    rankdir=TB;
    node [shape=box, fontname="Arial"];
    
    subgraph cluster_complexity {
        label="Анализ временной сложности O(n)";
        style=filled;
        color=lightgrey;
        
        subgraph cluster_step1 {
            label="Шаг 1: O(n)";
            style=filled;
            color=lightpink;
            node [style=filled,color=white];
            
            s1 [label="Перекладываем элементы < num\nв temp\nМакс. n операций"];
        }
        
        subgraph cluster_step2 {
            label="Шаг 2: O(1)";
            style=filled;
            color=lightgreen;
            node [style=filled,color=white];
            
            s2 [label="Вставляем num\n1 операция"];
        }
        
        subgraph cluster_step3 {
            label="Шаг 3: O(n)";
            style=filled;
            color=lightblue;
            node [style=filled,color=white];
            
            s3 [label="Возвращаем элементы\nиз temp\nМакс. n операций"];
        }
        
        subgraph cluster_total {
            label="Итого: O(n)";
            style=filled;
            color=white;
            node [style=filled,color=white];
            
            t1 [label="O(n) + O(1) + O(n)\n= O(2n + 1)\n= O(n)"];
        }
        
        s1 -> s2 -> s3 -> t1;
    }
    
    subgraph cluster_example {
        label="Пример (худший случай)";
        style=filled;
        color=lightgrey;
        
        subgraph cluster_ex1 {
            label="Исходный стек";
            style=filled;
            color=white;
            node [style=filled,color=white];
            
            e1 [label="[10,20,30]\nВставляем 40"];
        }
        
        subgraph cluster_ex2 {
            label="Шаг 1: O(n)";
            style=filled;
            color=white;
            node [style=filled,color=white];
            
            e2 [label="temp=[30,20,10]\nst=[]"];
        }
        
        subgraph cluster_ex3 {
            label="Шаг 2: O(1)";
            style=filled;
            color=white;
            node [style=filled,color=white];
            
            e3 [label="st=[40]"];
        }
        
        subgraph cluster_ex4 {
            label="Шаг 3: O(n)";
            style=filled;
            color=white;
            node [style=filled,color=white];
            
            e4 [label="Результат:\n[10,20,30,40]"];
        }
        
        e1 -> e2 -> e3 -> e4;
    }
}
@enddot
